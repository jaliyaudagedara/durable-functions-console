@using DfxConsole.BlazorUI.Services
@inject VersionService VersionService

@{
    var versionInfo = VersionService.GetVersionInfo();
}

<footer class="app-footer">
    <div class="container-fluid">
        <div class="footer-content">
            <div class="footer-section footer-left">
                <div class="brand-wrapper">
                    <svg class="footer-icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="footerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#0078D4;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#00BCF2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <!-- Gear/Cog representing orchestration -->
                        <circle cx="32" cy="32" r="30" fill="url(#footerGrad)"/>
                        <path d="M32 18 L36 22 L42 20 L44 26 L50 28 L48 34 L52 38 L46 40 L44 46 L38 44 L32 48 L26 44 L20 46 L18 40 L12 38 L16 34 L14 28 L20 26 L22 20 L28 22 Z" fill="white" opacity="0.9"/>
                        <circle cx="32" cy="32" r="8" fill="url(#footerGrad)"/>
                        <!-- Connected nodes representing workflow -->
                        <circle cx="32" cy="14" r="3" fill="white" opacity="0.8"/>
                        <circle cx="48" cy="32" r="3" fill="white" opacity="0.8"/>
                        <circle cx="32" cy="50" r="3" fill="white" opacity="0.8"/>
                        <circle cx="16" cy="32" r="3" fill="white" opacity="0.8"/>
                    </svg>
                    <span class="footer-brand">Durable Functions Console</span>
                </div>
                <a href="https://github.com/jaliyaudagedara/durable-functions-console"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="footer-link">
                    <i class="bi bi-github me-1"></i>
                    <span class="d-none d-md-inline">View on GitHub</span>
                    <span class="d-inline d-md-none">GitHub</span>
                </a>
            </div>

            <div class="footer-section footer-right">
                <div class="version-info">
                    <div class="version-item">
                        <i class="bi bi-box-seam me-1"></i>
                        <span class="version-value">@versionInfo.ApplicationVersion</span>
                    </div>
                    <div class="version-item">
                        <i class="bi bi-code-square me-1"></i>
                        <span class="version-value">@versionInfo.FrameworkDescription</span>
                    </div>
                    <div class="version-item">
                        <i class="bi bi-ubuntu me-1"></i>
                        <span class="version-value">@versionInfo.OSDescription</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

<style>
    .app-footer {
        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        padding: 0.75rem 0;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
        color: rgba(255, 255, 255, 0.9);
        flex-shrink: 0;
    }

    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0.75rem;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .footer-section {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .footer-left {
        flex: 0 0 auto;
    }

    .brand-wrapper {
        display: flex;
        align-items: center;
        gap: 0.375rem;
    }

    .footer-icon {
        width: 16px;
        height: 16px;
        flex-shrink: 0;
    }

    .footer-brand {
        font-weight: 600;
        font-size: 0.875rem;
        color: #ffffff;
        white-space: nowrap;
    }

    .footer-right {
        flex: 0 0 auto;
    }

    .footer-link {
        color: #ffffff;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.875rem;
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        transition: all 0.2s ease;
        background-color: rgba(255, 255, 255, 0.1);
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
    }

        .footer-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

    .version-info {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: center;
        justify-content: flex-end;
    }

    .version-item {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
        background-color: rgba(255, 255, 255, 0.15);
        border-radius: 4px;
        backdrop-filter: blur(10px);
        white-space: nowrap;
    }

    .version-label {
        font-weight: 500;
        opacity: 0.9;
    }

    .version-value {
        font-weight: 500;
        font-size: 0.75rem;
    }

    /* Responsive adjustments */
    @@media (max-width: 992px) {
        .footer-content {
            flex-wrap: wrap;
        }

        .footer-left {
            flex: 1 1 auto;
        }

        .footer-right {
            flex: 1 1 100%;
        }

        .version-info {
            justify-content: center;
            width: 100%;
        }
    }

    @@media (max-width: 768px) {
        .footer-content {
            flex-direction: column;
            gap: 0.5rem;
            text-align: center;
            padding: 0.5rem 1rem;
        }

        .footer-left,
        .footer-right {
            flex: 1 1 100%;
            justify-content: center;
        }

        .footer-section {
            flex-direction: column;
            gap: 0.5rem;
        }

        .version-info {
            justify-content: center;
        }
    }

    @@media (max-width: 576px) {
        .footer-icon {
            width: 14px;
            height: 14px;
        }

        .brand-wrapper {
            gap: 0.25rem;
        }

        .footer-brand {
            font-size: 0.75rem;
        }

        .version-item {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
        }

        .version-value {
            font-size: 0.65rem;
        }

        .version-info {
            gap: 0.375rem;
        }
    }
</style>